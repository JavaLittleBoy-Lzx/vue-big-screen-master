# æŠ€æœ¯æ¶æ„æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†ä¸œåŒ—æ—ä¸šå¤§å­¦æ™ºæ…§è½¦è¡Œæ•°æ®å¯è§†åŒ–å¹³å°çš„æŠ€æœ¯æ¶æ„ã€æ ¸å¿ƒç»„ä»¶ã€æ•°æ®æµå’Œå®ç°ç»†èŠ‚ã€‚æ—¨åœ¨ä¸ºå¼€å‘å›¢é˜Ÿæä¾›å…¨é¢çš„æŠ€æœ¯å‚è€ƒï¼Œä¾¿äºç»´æŠ¤å’ŒåŠŸèƒ½æ‰©å±•ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å‰ç«¯å±•ç¤ºå±‚ (Vue.js)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸»å¤§å±é¡µé¢    â”‚  3Då±•ç¤ºé¡µ   â”‚  æ•°æ®åˆ†æé¡µ   â”‚  è¯¦æƒ…å±•ç¤ºé¡µ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   ç»„ä»¶å±‚ (Components)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å›¾è¡¨ç»„ä»¶     â”‚  ä¸šåŠ¡ç»„ä»¶   â”‚  äº¤äº’ç»„ä»¶   â”‚  å¸ƒå±€ç»„ä»¶       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   æœåŠ¡å±‚ (Services)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åœè½¦æ•°æ®æœåŠ¡ â”‚ è½¦æµæ•°æ®æœåŠ¡ â”‚ è®¿å®¢VIPæœåŠ¡ â”‚ WebSocketæœåŠ¡  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   æ•°æ®è®¿é—®å±‚ (Axios)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  HTTPè¯·æ±‚    â”‚ WebSocket   â”‚ é”™è¯¯å¤„ç†   â”‚ ç¼“å­˜ç®¡ç†         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  åç«¯APIæ¥å£                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆé€‰æ‹©

#### æ ¸å¿ƒæ¡†æ¶
- **Vue 2.7.16**: é‡‡ç”¨Vue 2.xæœ€æ–°ç‰ˆæœ¬ï¼Œæä¾›æ›´å¥½çš„æ€§èƒ½å’Œå¼€å‘ä½“éªŒ
  - Composition APIæ”¯æŒ
  - æ›´å¥½çš„TypeScripté›†æˆ
  - æ€§èƒ½ä¼˜åŒ–

#### å›¾è¡¨åº“
- **ECharts 4.9.0**: ä¼ä¸šçº§å›¾è¡¨åº“ï¼ŒåŠŸèƒ½å¼ºå¤§
  - æ”¯æŒä¸°å¯Œçš„å›¾è¡¨ç±»å‹
  - é«˜æ€§èƒ½æ¸²æŸ“å¼•æ“
  - å®Œå–„çš„äº¤äº’èƒ½åŠ›
  - ç§»åŠ¨ç«¯é€‚é…

- **@antv/g2plot 2.4.35**: ä¸“ä¸šçš„ç»Ÿè®¡å›¾è¡¨åº“
  - åŸºäºå›¾å½¢è¯­æ³•
  - é«˜åº¦å¯å®šåˆ¶åŒ–
  - ä¼˜é›…çš„åŠ¨ç”»æ•ˆæœ

#### UIç»„ä»¶åº“
- **@jiaminghi/data-view 2.10.0**: ä¸“ä¸ºæ•°æ®å¤§å±è®¾è®¡
  - å¤§å±ä¸“ç”¨ç»„ä»¶
  - è¾¹æ¡†ã€è£…é¥°ã€å›¾è¡¨
  - å“åº”å¼è®¾è®¡

## ğŸ“ é¡¹ç›®ç»“æ„è¯¦è§£

### ç›®å½•ç»“æ„è¯´æ˜

```
src/
â”œâ”€â”€ assets/                    # é™æ€èµ„æº
â”‚   â”œâ”€â”€ scss/                 # SCSSæ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ _variables.scss   # SCSSå˜é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ index.scss        # æ ·å¼å…¥å£æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ style.scss        # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ title-bg.png          # æ ‡é¢˜èƒŒæ™¯å›¾
â”‚   â”œâ”€â”€ logo.png              # é¡¹ç›®Logo
â”‚   â””â”€â”€ pageBg.png            # é¡µé¢èƒŒæ™¯å›¾
â”‚
â”œâ”€â”€ components/               # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ echart/              # å›¾è¡¨ç»„ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ centreLeft1Chart.vue      # å·¦ä¸­å›¾è¡¨1
â”‚   â”‚   â”œâ”€â”€ centreLeft2Chart.vue      # å·¦ä¸­å›¾è¡¨2
â”‚   â”‚   â”œâ”€â”€ bottom/                 # åº•éƒ¨å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ bottomLeftChart.vue  # å·¦ä¸‹å›¾è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ bottomRightChart.vue # å³ä¸‹å›¾è¡¨
â”‚   â”‚   â”œâ”€â”€ center/                 # ä¸­å¿ƒå›¾è¡¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ visitor/                # è®¿å®¢ç›¸å…³å›¾è¡¨
â”‚   â”œâ”€â”€ FullScreenContainerFix.vue  # å…¨å±å®¹å™¨ä¿®å¤ç»„ä»¶
â”‚   â”œâ”€â”€ RealTimeVehicleMonitor.vue  # å®æ—¶è½¦è¾†ç›‘æ§
â”‚   â”œâ”€â”€ VisitorVipAnalysisModal.vue # è®¿å®¢VIPåˆ†æå¼¹çª—
â”‚   â”œâ”€â”€ WordCloud3D.vue            # 3Dè¯äº‘ç»„ä»¶
â”‚   â””â”€â”€ VisitorReservationPanel.vue # è®¿å®¢é¢„çº¦é¢æ¿
â”‚
â”œâ”€â”€ services/                  # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ parkingDataService.js          # åœè½¦æ•°æ®æœåŠ¡
â”‚   â”œâ”€â”€ vehicleFlowDataService.js      # è½¦è¾†æµé‡æœåŠ¡
â”‚   â”œâ”€â”€ visitorVipDataService.js       # è®¿å®¢VIPæœåŠ¡
â”‚   â”œâ”€â”€ websocketService.js            # WebSocketæœåŠ¡
â”‚   â””â”€â”€ vehicleDataService.js          # è½¦è¾†æ•°æ®æœåŠ¡
â”‚
â”œâ”€â”€ views/                     # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ index.vue            # ä¸»å¤§å±é¡µé¢ (905è¡Œä»£ç )
â”‚   â”œâ”€â”€ center.vue           # ä¸­å¿ƒå±•ç¤ºé¡µé¢
â”‚   â”œâ”€â”€ centreLeft1.vue      # å·¦ä¸­ç»„ä»¶é¡µé¢
â”‚   â”œâ”€â”€ centreLeft2.vue      # å·¦ä¸­ç»„ä»¶é¡µé¢2
â”‚   â”œâ”€â”€ centreRight1.vue     # å³ä¸­ç»„ä»¶é¡µé¢1
â”‚   â”œâ”€â”€ centreRight2.vue     # å³ä¸­ç»„ä»¶é¡µé¢2
â”‚   â”œâ”€â”€ bottomLeft.vue       # å·¦ä¸‹ç»„ä»¶é¡µé¢
â”‚   â”œâ”€â”€ bottomRight.vue      # å³ä¸‹ç»„ä»¶é¡µé¢
â”‚   â”œâ”€â”€ channelStats.vue     # é€šé“ç»Ÿè®¡é¡µé¢
â”‚   â”œâ”€â”€ parkingDuration.vue  # åœè½¦æ—¶é•¿é¡µé¢
â”‚   â””â”€â”€ ...                  # å…¶ä»–åŠŸèƒ½é¡µé¢
â”‚
â”œâ”€â”€ config/                   # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ apiConfig.js         # APIæ¥å£é…ç½®
â”‚
â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ corsHandler.js       # CORSå¤„ç†å·¥å…·
â”‚   â””â”€â”€ websocketTest.js     # WebSocketæµ‹è¯•å·¥å…·
â”‚
â”œâ”€â”€ store/                    # VuexçŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ index.js             # Storeé…ç½®
â”‚
â”œâ”€â”€ router/                   # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ index.js             # è·¯ç”±å®šä¹‰
â”‚
â”œâ”€â”€ main.js                   # åº”ç”¨å…¥å£æ–‡ä»¶
â””â”€â”€ App.vue                   # æ ¹ç»„ä»¶
```

### æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

#### 1. ä¸»å¤§å±é¡µé¢ (`src/views/index.vue`)
- **ä»£ç è¡Œæ•°**: 905è¡Œ
- **åŠŸèƒ½æè¿°**: é¡¹ç›®æ ¸å¿ƒé¡µé¢ï¼Œå±•ç¤ºå®Œæ•´çš„å¤§å±æ•°æ®
- **å¸ƒå±€æ–¹å¼**: CSS Gridä¸‰åˆ—å¸ƒå±€ (26% 46% 27%)
- **æ ¸å¿ƒåŠŸèƒ½**:
  - å®æ—¶æ•°æ®å±•ç¤ºå’Œæ›´æ–°
  - æ—¶é—´/é€šé“ç­›é€‰å™¨æ§åˆ¶
  - å¼¹çª—äº¤äº’ç®¡ç†
  - æ ¸å¿ƒæŒ‡æ ‡è®¡ç®—å’Œå±•ç¤º
  - æ•°æ®ç¼“å­˜å’Œåˆ·æ–°æœºåˆ¶

#### 2. æ•°æ®æœåŠ¡å±‚ (`src/services/`)

##### åœè½¦æ•°æ®æœåŠ¡ (`parkingDataService.js`)
```javascript
// æ ¸å¿ƒæ–¹æ³•è¯´æ˜
class ParkingDataService {
  // è·å–å®æ—¶è½¦æµæ•°æ®
  async getRealTimeFlow(timeRange, channelType) {}

  // è·å–è½¦è¾†è½¨è¿¹æ•°æ®
  async getVehicleTrajectory(vehicleId) {}

  // è·å–24å°æ—¶è¶‹åŠ¿åˆ†æ
  async getHourlyTrend(date) {}

  // è·å–åœè½¦æ—¶é•¿åˆ†å¸ƒ
  async getParkingDuration(timeRange) {}

  // è·å–æ”¶è´¹åˆ†æ
  async getRevenueAnalysis(timeRange) {}

  // è·å–å¼‚å¸¸ç›‘æ§æ•°æ®
  async getAnomalyMonitor() {}
}
```

##### è½¦è¾†æµé‡æœåŠ¡ (`vehicleFlowDataService.js`)
```javascript
// è½¦è¾†æµé‡æ•°æ®ä¸“é—¨æœåŠ¡
class VehicleFlowDataService {
  // è·å–è½¦è¾†æµé‡ç»Ÿè®¡æ•°æ®
  async getVehicleFlowData(timeRange, channelType) {}

  // è·å–é€šé“è¯¦ç»†ç»Ÿè®¡
  async getChannelDetailStatistics(channelId) {}

  // è·å–è¯¦ç»†ç»Ÿè®¡æ•°æ®
  async getDetailStatistics(timeRange, dimensions) {}
}
```

##### è®¿å®¢VIPæœåŠ¡ (`visitorVipDataService.js`)
```javascript
// è®¿å®¢å’ŒVIPè½¦è¾†æ•°æ®æœåŠ¡
class VisitorVipDataService {
  // è·å–è®¿å®¢VIPå°æ—¶ç»Ÿè®¡æ•°æ®
  async getHourlyVisitorVipData(date) {}

  // è·å–è®¿å®¢VIPè¯¦ç»†åˆ†æ
  async getVisitorVipAnalysis(timeRange) {}
}
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶è¯¦è§£

### å›¾è¡¨ç»„ä»¶æ¶æ„

#### 1. å›¾è¡¨ç»„ä»¶åŸºç±»è®¾è®¡
```javascript
// å›¾è¡¨ç»„ä»¶é€šç”¨ç»“æ„
export default {
  name: 'BaseChart',
  props: {
    chartData: { type: Array, required: true },
    chartOptions: { type: Object, default: () => ({}) },
    theme: { type: String, default: 'dark' }
  },
  data() {
    return {
      chart: null,
      resizeObserver: null
    }
  },
  mounted() {
    this.initChart()
    this.setupResizeObserver()
  },
  methods: {
    initChart() {
      // å›¾è¡¨åˆå§‹åŒ–é€»è¾‘
    },
    updateChart() {
      // å›¾è¡¨æ›´æ–°é€»è¾‘
    },
    setupResizeObserver() {
      // å“åº”å¼å¤„ç†
    }
  }
}
```

#### 2. ä¸»è¦å›¾è¡¨ç»„ä»¶

##### è®¿å®¢VIPå †å å›¾è¡¨ (`VisitorVipStackedChart.vue`)
- **æ–‡ä»¶è·¯å¾„**: `src/components/echart/visitor/VisitorVipStackedChart.vue`
- **åŠŸèƒ½æè¿°**: å±•ç¤ºè®¿å®¢å’ŒVIPè½¦è¾†çš„24å°æ—¶è¿›å‡ºæ•°æ®
- **æŠ€æœ¯ç‰¹ç‚¹**:
  - å †å æŸ±çŠ¶å›¾å±•ç¤º
  - æ”¯æŒå›¾ä¾‹åˆ‡æ¢
  - ç‚¹å‡»äº‹ä»¶å¤„ç†
  - å“åº”å¼å°ºå¯¸é€‚é…
  - åŠ¨ç”»æ•ˆæœä¼˜åŒ–

##### é€šé“æµé‡é¥¼å›¾ (`ChannelFlowPieChart.vue`)
- **æ–‡ä»¶è·¯å¾„**: `src/components/echart/channel/ChannelFlowPieChart.vue`
- **åŠŸèƒ½æè¿°**: å±•ç¤ºå„é€šé“æµé‡åˆ†å¸ƒæƒ…å†µ
- **æŠ€æœ¯ç‰¹ç‚¹**:
  - ç¯å½¢é¥¼å›¾è®¾è®¡
  - æ€»è§ˆ/è¯¦ç»†æ¨¡å¼åˆ‡æ¢
  - è‡ªå®šä¹‰æ ‡ç­¾æ˜¾ç¤º
  - ç‚¹å‡»äº‹ä»¶è§¦å‘é€šé“è¯¦æƒ…å¼¹çª—
  - é«˜äº®é€‰ä¸­æ•ˆæœ

##### å®æ—¶è½¦è¾†ç›‘æ§ (`RealTimeVehicleMonitor.vue`)
- **æ–‡ä»¶è·¯å¾„**: `src/components/RealTimeVehicleMonitor.vue`
- **åŠŸèƒ½æè¿°**: å®æ—¶ç›‘æ§è½¦è¾†è¿›å‡ºæƒ…å†µ
- **æŠ€æœ¯ç‰¹ç‚¹**:
  - WebSocketå®æ—¶æ•°æ®è¿æ¥
  - è‡ªåŠ¨æ»šåŠ¨åˆ—è¡¨
  - è½¦è¾†çŠ¶æ€å›¾æ ‡æ˜¾ç¤º
  - å¼‚å¸¸è½¦è¾†é«˜äº®æé†’

## ğŸ¨ æ ·å¼ç³»ç»Ÿæ¶æ„

### SCSSæ¶æ„è®¾è®¡

#### 1. å˜é‡ç³»ç»Ÿ (`src/assets/scss/_variables.scss`)
```scss
// é¢œè‰²å˜é‡
$primary-color: #1890ff;
$success-color: #52c41a;
$warning-color: #faad14;
$error-color: #f5222d;

// èƒŒæ™¯è‰²ç³»
$bg-primary: #0b132a;
$bg-secondary: #1e3a5f;
$bg-tertiary: #2a4766;

// æ–‡å­—é¢œè‰²
$text-primary: #ffffff;
$text-secondary: #a0aec0;
$text-muted: #718096;

// è¾¹æ¡†é¢œè‰²
$border-color: #1e3a5f;
$border-light: #2a4766;

// å›¾è¡¨é…è‰²
$chart-colors: (
  #1890ff, #2fc25b, #facc14,
  #f04864, #8543e0, #13c2c2,
  #fa8c16, #eb2f96, #722ed1
);

// å°ºå¯¸å˜é‡
$sidebar-width: 260px;
$header-height: 64px;
$card-padding: 24px;
$grid-gap: 16px;

// å­—ä½“å¤§å°
$font-size-xs: 12px;
$font-size-sm: 14px;
$font-size-md: 16px;
$font-size-lg: 18px;
$font-size-xl: 24px;

// åœ†è§’
$border-radius-sm: 4px;
$border-radius-md: 6px;
$border-radius-lg: 8px;

// é˜´å½±
$box-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
$box-shadow-md: 0 4px 8px rgba(0, 0, 0, 0.15);
$box-shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.2);
```

#### 2. æ··åˆå™¨ç³»ç»Ÿ
```scss
// flexå¸ƒå±€æ··åˆå™¨
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

// æ–‡å­—çœç•¥æ··åˆå™¨
@mixin text-ellipsis($lines: 1) {
  @if $lines == 1 {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

// å¡ç‰‡æ ·å¼æ··åˆå™¨
@mixin card-style($padding: $card-padding) {
  background: $bg-secondary;
  border: 1px solid $border-color;
  border-radius: $border-radius-lg;
  padding: $padding;
  box-shadow: $box-shadow-md;
}
```

#### 3. å“åº”å¼è®¾è®¡
```scss
// æ–­ç‚¹å®šä¹‰
$breakpoints: (
  'xs': 480px,
  'sm': 768px,
  'md': 1024px,
  'lg': 1280px,
  'xl': 1440px,
  'xxl': 1920px
);

// å“åº”å¼æ··åˆå™¨
@mixin respond-to($breakpoint) {
  @media (min-width: map-get($breakpoints, $breakpoint)) {
    @content;
  }
}

// å¤§å±é€‚é…
@media screen and (max-width: 1920px) {
  .big-screen-container {
    transform: scale(1);
  }
}

@media screen and (max-width: 1680px) {
  .big-screen-container {
    transform: scale(0.875);
  }
}

@media screen and (max-width: 1440px) {
  .big-screen-container {
    transform: scale(0.75);
  }
}
```

## ğŸ”„ æ•°æ®æµæ¶æ„

### æ•°æ®è·å–æµç¨‹

```mermaid
graph TD
    A[ç»„ä»¶è°ƒç”¨] --> B[æœåŠ¡å±‚å¤„ç†]
    B --> C[APIè¯·æ±‚]
    C --> D[æ•°æ®éªŒè¯]
    D --> E[æ•°æ®å¤„ç†]
    E --> F[ç¼“å­˜å­˜å‚¨]
    F --> G[å›¾è¡¨æ›´æ–°]
    G --> H[ç•Œé¢æ¸²æŸ“]
```

### æ•°æ®ç¼“å­˜ç­–ç•¥

#### 1. ç¼“å­˜é…ç½®
```javascript
// æ•°æ®ç¼“å­˜é…ç½®
const CACHE_CONFIG = {
  duration: 30 * 1000,  // 30ç§’ç¼“å­˜
  maxSize: 50,         // æœ€å¤§ç¼“å­˜æ¡ç›®
  keyPrefix: 'nefu_datav_'
};

// ç¼“å­˜ç®¡ç†ç±»
class DataCache {
  constructor(config) {
    this.config = config;
    this.cache = new Map();
  }

  set(key, data) {
    this.cache.set(key, {
      data,
      timestamp: Date.now()
    });
  }

  get(key) {
    const item = this.cache.get(key);
    if (!item) return null;

    if (Date.now() - item.timestamp > this.config.duration) {
      this.cache.delete(key);
      return null;
    }

    return item.data;
  }
}
```

#### 2. é‡è¯•æœºåˆ¶
```javascript
// è¯·æ±‚é‡è¯•é…ç½®
const RETRY_CONFIG = {
  maxRetries: 3,
  retryDelay: 1000,
  retryCondition: (error) => {
    return error.code !== 404 && error.code !== 401;
  }
};

// é‡è¯•è£…é¥°å™¨
function withRetry(target, propertyKey, descriptor) {
  const originalMethod = descriptor.value;

  descriptor.value = async function(...args) {
    let lastError;

    for (let i = 0; i <= RETRY_CONFIG.maxRetries; i++) {
      try {
        return await originalMethod.apply(this, args);
      } catch (error) {
        lastError = error;

        if (i === RETRY_CONFIG.maxRetries) break;
        if (!RETRY_CONFIG.retryCondition(error)) break;

        await new Promise(resolve =>
          setTimeout(resolve, RETRY_CONFIG.retryDelay * (i + 1))
        );
      }
    }

    throw lastError;
  };

  return descriptor;
}
```

### å®æ—¶æ•°æ®æ›´æ–°

#### 1. WebSocketæœåŠ¡
```javascript
// WebSocketæœåŠ¡ç±»
class WebSocketService {
  constructor(url) {
    this.url = url;
    this.socket = null;
    this.reconnectAttempts = 0;
    this.maxReconnectAttempts = 5;
    this.listeners = new Map();
  }

  connect() {
    this.socket = new WebSocket(this.url);

    this.socket.onopen = () => {
      console.log('WebSocketè¿æ¥å·²å»ºç«‹');
      this.reconnectAttempts = 0;
      this.startHeartbeat();
    };

    this.socket.onmessage = (event) => {
      const data = JSON.parse(event.data);
      this.handleMessage(data);
    };

    this.socket.onclose = () => {
      console.log('WebSocketè¿æ¥å·²å…³é—­');
      this.reconnect();
    };

    this.socket.onerror = (error) => {
      console.error('WebSocketé”™è¯¯:', error);
    };
  }

  handleMessage(data) {
    const { type, payload } = data;
    const handlers = this.listeners.get(type) || [];
    handlers.forEach(handler => handler(payload));
  }

  subscribe(type, handler) {
    if (!this.listeners.has(type)) {
      this.listeners.set(type, []);
    }
    this.listeners.get(type).push(handler);
  }

  unsubscribe(type, handler) {
    const handlers = this.listeners.get(type);
    if (handlers) {
      const index = handlers.indexOf(handler);
      if (index > -1) {
        handlers.splice(index, 1);
      }
    }
  }
}
```

#### 2. è‡ªåŠ¨åˆ·æ–°æœºåˆ¶
```javascript
// è‡ªåŠ¨åˆ·æ–°ç®¡ç†å™¨
class AutoRefreshManager {
  constructor(interval = 30000) {
    this.interval = interval;
    this.timers = new Map();
    this.isVisible = true;
    this.setupVisibilityHandler();
  }

  setupVisibilityHandler() {
    document.addEventListener('visibilitychange', () => {
      this.isVisible = !document.hidden;
      if (this.isVisible) {
        this.restartAll();
      } else {
        this.pauseAll();
      }
    });
  }

  start(key, callback) {
    this.stop(key);

    const timer = setInterval(() => {
      if (this.isVisible) {
        callback();
      }
    }, this.interval);

    this.timers.set(key, timer);
  }

  stop(key) {
    const timer = this.timers.get(key);
    if (timer) {
      clearInterval(timer);
      this.timers.delete(key);
    }
  }

  pauseAll() {
    this.timers.forEach(timer => clearInterval(timer));
  }

  restartAll() {
    // é‡å¯æ‰€æœ‰å®šæ—¶å™¨çš„é€»è¾‘
  }
}
```

## ğŸ“Š å›¾è¡¨é…ç½®ç³»ç»Ÿ

### EChartsé…ç½®æ ‡å‡†åŒ–

#### 1. ä¸»é¢˜é…ç½®
```javascript
// æ·±è‰²ä¸»é¢˜é…ç½®
export const darkTheme = {
  backgroundColor: 'transparent',
  textStyle: {
    color: '#ffffff'
  },
  title: {
    textStyle: {
      color: '#ffffff'
    }
  },
  legend: {
    textStyle: {
      color: '#ffffff'
    }
  },
  tooltip: {
    backgroundColor: 'rgba(0, 0, 0, 0.8)',
    borderColor: '#1890ff',
    textStyle: {
      color: '#ffffff'
    }
  }
};

// å›¾è¡¨é€šç”¨é…ç½®
export const commonConfig = {
  grid: {
    top: '10%',
    left: '3%',
    right: '4%',
    bottom: '3%',
    containLabel: true
  },
  tooltip: {
    trigger: 'axis',
    backgroundColor: 'rgba(0, 0, 0, 0.8)',
    borderColor: '#1890ff',
    borderWidth: 1,
    textStyle: {
      color: '#ffffff',
      fontSize: 14
    }
  },
  legend: {
    type: 'scroll',
    orient: 'horizontal',
    bottom: 0,
    textStyle: {
      color: '#ffffff',
      fontSize: 12
    }
  }
};
```

#### 2. å›¾è¡¨å·¥å‚
```javascript
// å›¾è¡¨å·¥å‚ç±»
class ChartFactory {
  static createPieChart(data, options = {}) {
    return {
      ...commonConfig,
      series: [{
        type: 'pie',
        radius: options.radius || ['40%', '70%'],
        center: options.center || ['50%', '50%'],
        data: data,
        emphasis: {
          itemStyle: {
            shadowBlur: 10,
            shadowOffsetX: 0,
            shadowColor: 'rgba(0, 0, 0, 0.5)'
          }
        },
        label: {
          color: '#ffffff',
          fontSize: 12
        },
        labelLine: {
          lineStyle: {
            color: '#ffffff'
          }
        }
      }],
      ...options
    };
  }

  static createBarChart(data, xAxisData, options = {}) {
    return {
      ...commonConfig,
      xAxis: {
        type: 'category',
        data: xAxisData,
        axisLine: {
          lineStyle: {
            color: '#1e3a5f'
          }
        },
        axisLabel: {
          color: '#ffffff',
          fontSize: 12
        }
      },
      yAxis: {
        type: 'value',
        axisLine: {
          lineStyle: {
            color: '#1e3a5f'
          }
        },
        axisLabel: {
          color: '#ffffff',
          fontSize: 12
        },
        splitLine: {
          lineStyle: {
            color: '#1e3a5f',
            type: 'dashed'
          }
        }
      },
      series: [{
        type: 'bar',
        data: data,
        itemStyle: {
          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
            { offset: 0, color: '#1890ff' },
            { offset: 1, color: '#0050b3' }
          ])
        },
        emphasis: {
          itemStyle: {
            color: '#40a9ff'
          }
        }
      }],
      ...options
    };
  }

  static createLineChart(data, xAxisData, options = {}) {
    return {
      ...commonConfig,
      xAxis: {
        type: 'category',
        data: xAxisData,
        axisLine: {
          lineStyle: {
            color: '#1e3a5f'
          }
        },
        axisLabel: {
          color: '#ffffff',
          fontSize: 12
        }
      },
      yAxis: {
        type: 'value',
        axisLine: {
          lineStyle: {
            color: '#1e3a5f'
          }
        },
        axisLabel: {
          color: '#ffffff',
          fontSize: 12
        },
        splitLine: {
          lineStyle: {
            color: '#1e3a5f',
            type: 'dashed'
          }
        }
      },
      series: [{
        type: 'line',
        data: data,
        smooth: true,
        symbol: 'circle',
        symbolSize: 6,
        lineStyle: {
          color: '#1890ff',
          width: 3
        },
        itemStyle: {
          color: '#1890ff'
        },
        areaStyle: {
          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
            { offset: 0, color: 'rgba(24, 144, 255, 0.3)' },
            { offset: 1, color: 'rgba(24, 144, 255, 0.1)' }
          ])
        }
      }],
      ...options
    };
  }
}
```

## ğŸ”Œ APIæ¥å£æ¶æ„

### æ¥å£é…ç½®ç®¡ç†

#### 1. ç¯å¢ƒé…ç½®
```javascript
// config/apiConfig.js
const ENV = process.env.NODE_ENV || 'development';

const API_CONFIG = {
  development: {
    baseURL: '/api',
    timeout: 10000,
    retryAttempts: 3,
    retryDelay: 1000
  },
  production: {
    baseURL: 'http://localhost:8675',
    timeout: 10000,
    retryAttempts: 3,
    retryDelay: 1000
  }
};

const currentConfig = API_CONFIG[ENV];

export const API_PREFIX = '/parking/nefuData';
export const BASE_URL = currentConfig.baseURL;
export const TIMEOUT = currentConfig.timeout;
export const RETRY_ATTEMPTS = currentConfig.retryAttempts;
export const RETRY_DELAY = currentConfig.retryDelay;
```

#### 2. è¯·æ±‚æ‹¦æˆªå™¨
```javascript
// è¯·æ±‚æ‹¦æˆªå™¨é…ç½®
axios.interceptors.request.use(
  config => {
    // æ·»åŠ æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜
    if (config.method === 'get') {
      config.params = {
        ...config.params,
        _t: Date.now()
      };
    }

    // æ·»åŠ è¯·æ±‚æ ‡è¯†
    config.headers['X-Requested-With'] = 'XMLHttpRequest';
    config.headers['Content-Type'] = 'application/json';

    // å¼€å‘ç¯å¢ƒæ·»åŠ è°ƒè¯•ä¿¡æ¯
    if (process.env.NODE_ENV === 'development') {
      console.log(`[API Request] ${config.method.toUpperCase()} ${config.url}`, config.data);
    }

    return config;
  },
  error => {
    console.error('[API Request Error]', error);
    return Promise.reject(error);
  }
);

// å“åº”æ‹¦æˆªå™¨é…ç½®
axios.interceptors.response.use(
  response => {
    const { data, status, config } = response;

    // å¼€å‘ç¯å¢ƒæ‰“å°å“åº”ä¿¡æ¯
    if (process.env.NODE_ENV === 'development') {
      console.log(`[API Response] ${config.method.toUpperCase()} ${config.url}`, data);
    }

    // ç»Ÿä¸€å“åº”æ ¼å¼å¤„ç†
    if (data.code === 200) {
      return data.data;
    } else {
      throw new Error(data.message || 'è¯·æ±‚å¤±è´¥');
    }
  },
  error => {
    console.error('[API Response Error]', error);

    // ç»Ÿä¸€é”™è¯¯å¤„ç†
    if (error.response) {
      const { status, data } = error.response;

      switch (status) {
        case 401:
          // å¤„ç†æœªæˆæƒ
          break;
        case 403:
          // å¤„ç†ç¦æ­¢è®¿é—®
          break;
        case 404:
          // å¤„ç†èµ„æºä¸å­˜åœ¨
          break;
        case 500:
          // å¤„ç†æœåŠ¡å™¨é”™è¯¯
          break;
        default:
          // å…¶ä»–é”™è¯¯
          break;
      }

      throw new Error(data.message || `HTTP ${status} Error`);
    } else if (error.request) {
      // ç½‘ç»œé”™è¯¯
      throw new Error('ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®');
    } else {
      // å…¶ä»–é”™è¯¯
      throw error;
    }
  }
);
```

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. ç»„ä»¶æ‡’åŠ è½½
```javascript
// è·¯ç”±æ‡’åŠ è½½
const routes = [
  {
    path: '/',
    name: 'Home',
    component: () => import(/* webpackChunkName: "home" */ '@/views/index.vue')
  },
  {
    path: '/demo3d',
    name: 'Demo3D',
    component: () => import(/* webpackChunkName: "demo3d" */ '@/views/demo3d.vue')
  }
];

// ç»„ä»¶å¼‚æ­¥åŠ è½½
export default {
  components: {
    HeavyChart: () => import('@/components/echart/HeavyChart.vue')
  }
}
```

### 2. å›¾è¡¨æŒ‰éœ€åŠ è½½
```javascript
// EChartsæŒ‰éœ€å¼•å…¥
import * as echarts from 'echarts/core';
import { LineChart, BarChart, PieChart } from 'echarts/charts';
import {
  TitleComponent,
  TooltipComponent,
  GridComponent,
  LegendComponent
} from 'echarts/components';

// æ³¨å†Œå¿…éœ€çš„ç»„ä»¶
echarts.use([
  LineChart,
  BarChart,
  PieChart,
  TitleComponent,
  TooltipComponent,
  GridComponent,
  LegendComponent
]);
```

### 3. æ•°æ®ä¼˜åŒ–
```javascript
// æ•°æ®åˆ†é¡µåŠ è½½
class DataLoader {
  constructor(pageSize = 100) {
    this.pageSize = pageSize;
    this.currentPage = 1;
    this.loading = false;
  }

  async loadPage(page, filters = {}) {
    if (this.loading) return;

    this.loading = true;
    try {
      const offset = (page - 1) * this.pageSize;
      const data = await api.getData({
        offset,
        limit: this.pageSize,
        ...filters
      });

      return data;
    } finally {
      this.loading = false;
    }
  }
}

// è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–
class VirtualScroll {
  constructor(container, itemHeight, renderItem) {
    this.container = container;
    this.itemHeight = itemHeight;
    this.renderItem = renderItem;
    this.visibleCount = Math.ceil(container.clientHeight / itemHeight);
    this.scrollTop = 0;

    this.setupScrollListener();
  }

  render(data) {
    const startIndex = Math.floor(this.scrollTop / this.itemHeight);
    const endIndex = Math.min(startIndex + this.visibleCount, data.length);

    // æ¸²æŸ“å¯è§é¡¹ç›®
    for (let i = startIndex; i < endIndex; i++) {
      this.renderItem(data[i], i);
    }
  }
}
```

## ğŸ”§ å¼€å‘å·¥å…·é…ç½®

### 1. ESLinté…ç½®
```javascript
// .eslintrc.js
module.exports = {
  root: true,
  env: {
    node: true,
    browser: true,
    es6: true
  },
  extends: [
    'plugin:vue/essential',
    '@vue/standard'
  ],
  parserOptions: {
    parser: 'babel-eslint'
  },
  rules: {
    'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off',
    'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off',
    'vue/no-unused-components': 'warn',
    'vue/no-unused-vars': 'warn',
    'indent': ['error', 2],
    'quotes': ['error', 'single'],
    'semi': ['error', 'never']
  }
}
```

### 2. æ„å»ºä¼˜åŒ–
```javascript
// vue.config.js
const path = require('path');
const webpack = require('webpack');

module.exports = {
  productionSourceMap: false,

  // ä»£ç åˆ†å‰²
  configureWebpack: {
    optimization: {
      splitChunks: {
        chunks: 'all',
        cacheGroups: {
          vendor: {
            name: 'chunk-vendors',
            test: /[\\/]node_modules[\\/]/,
            priority: 10,
            chunks: 'initial'
          },
          echarts: {
            name: 'chunk-echarts',
            test: /[\\/]node_modules[\\/]echarts[\\/]/,
            priority: 20,
            chunks: 'all'
          },
          antv: {
            name: 'chunk-antv',
            test: /[\\/]node_modules[\\/]@antv[\\/]/,
            priority: 20,
            chunks: 'all'
          }
        }
      }
    }
  },

  // ä»£ç†é…ç½®
  devServer: {
    port: 6954,
    proxy: {
      '/api': {
        target: 'http://localhost:8675',
        changeOrigin: true,
        secure: false,
        pathRewrite: { '^/api': '' }
      }
    }
  },

  // å…¨å±€æ ·å¼å˜é‡
  css: {
    loaderOptions: {
      sass: {
        prependData: `@import "@/assets/scss/_variables.scss";`
      }
    }
  }
}
```

## ğŸ“ ä»£ç è§„èŒƒ

### 1. ç»„ä»¶å‘½åè§„èŒƒ
```javascript
// ç»„ä»¶æ–‡ä»¶å‘½åä½¿ç”¨PascalCase
// good: VehicleFlowChart.vue
// bad: vehicleFlowChart.vue

// ç»„ä»¶æ³¨å†Œä½¿ç”¨kebab-case
export default {
  name: 'VehicleFlowChart',
  components: {
    'vehicle-flow-chart': VehicleFlowChart
  }
}
```

### 2. æ–¹æ³•å‘½åè§„èŒƒ
```javascript
// ä½¿ç”¨åŠ¨è¯å¼€å¤´çš„é©¼å³°å‘½å
export default {
  methods: {
    // è·å–æ•°æ®
    getVehicleData() {},

    // å¤„ç†äº‹ä»¶
    handleChartClick() {},

    // æ ¼å¼åŒ–æ•°æ®
    formatChartData() {},

    // éªŒè¯æ•°æ®
    validateInput() {}
  }
}
```

### 3. CSSç±»å‘½åè§„èŒƒ
```scss
// ä½¿ç”¨BEMå‘½åè§„èŒƒ
.chart-container {           // Block
  &__title {                // Element
    color: #fff;
  }

  &--large {                // Modifier
    font-size: 18px;
  }
}

// å·¥å…·ç±»
.text-center { text-align: center; }
.text-right { text-align: right; }
.text-bold { font-weight: bold; }
```

## ğŸš€ éƒ¨ç½²æ¶æ„

### 1. æ„å»ºæµç¨‹
```mermaid
graph LR
    A[æºä»£ç ] --> B[Webpackæ‰“åŒ…]
    B --> C[ä»£ç å‹ç¼©]
    C --> D[èµ„æºä¼˜åŒ–]
    D --> E[ç”Ÿæˆdistç›®å½•]
    E --> F[éƒ¨ç½²åˆ°æœåŠ¡å™¨]
```

### 2. ç¯å¢ƒå˜é‡é…ç½®
```bash
# .env.development
VUE_APP_NODE_ENV=development
VUE_APP_API_BASE_URL=/api
VUE_APP_WS_URL=ws://localhost:6954
VUE_APP_DEBUG=true

# .env.production
VUE_APP_NODE_ENV=production
VUE_APP_API_BASE_URL=http://localhost:8675
VUE_APP_WS_URL=ws://localhost:8675
VUE_APP_DEBUG=false
```

## ğŸ“Š ç›‘æ§ä¸è°ƒè¯•

### 1. é”™è¯¯ç›‘æ§
```javascript
// å…¨å±€é”™è¯¯å¤„ç†
Vue.config.errorHandler = (err, vm, info) => {
  console.error('Vue Error:', err);
  console.error('Component:', vm);
  console.error('Info:', info);

  // å‘é€é”™è¯¯æŠ¥å‘Š
  if (process.env.NODE_ENV === 'production') {
    // ä¸ŠæŠ¥é”™è¯¯åˆ°ç›‘æ§ç³»ç»Ÿ
  }
};

// Promiseé”™è¯¯å¤„ç†
window.addEventListener('unhandledrejection', event => {
  console.error('Unhandled Promise Rejection:', event.reason);

  // é˜»æ­¢é»˜è®¤è¡Œä¸º
  event.preventDefault();
});
```

### 2. æ€§èƒ½ç›‘æ§
```javascript
// é¡µé¢åŠ è½½æ€§èƒ½ç›‘æ§
window.addEventListener('load', () => {
  const perfData = window.performance.timing;
  const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;

  console.log('Page Load Time:', pageLoadTime);

  // ä¸ŠæŠ¥æ€§èƒ½æ•°æ®
  if (process.env.NODE_ENV === 'production') {
    // å‘é€æ€§èƒ½æ•°æ®åˆ°ç›‘æ§ç³»ç»Ÿ
  }
});

// ç»„ä»¶æ¸²æŸ“æ€§èƒ½ç›‘æ§
export default {
  mounted() {
    const startTime = performance.now();

    this.$nextTick(() => {
      const endTime = performance.now();
      console.log(`${this.$options.name} render time:`, endTime - startTime);
    });
  }
}
```

---

æœ¬æ–‡æ¡£æŒç»­æ›´æ–°ä¸­ï¼Œå¦‚æœ‰ç–‘é—®æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚